# NO.8 Docker(持续更新ing)

一：设置容器内IP为静态，即固定IP。
```
#!/bin/bash
#保存为一个脚本，dockernet.sh
#source dockernet.sh，将docker-net函数调入系统中，可以直接使用docker-net固定某个容器的IP。
#不足：重启IP消失
#可以参考我的另一个解决不足的代码:https://github.com/saintic/fix_docker_ip
#用法：
#1.docker run -tdi --net=none image(以--net=none这种方式启动容器)
#2.docker-net container_id ip/mask gateway(配置IP信息考虑是用nat还是bridge模式)

rpm -q bridge-utils &> /dev/null  || yum -y install bridge-utils 
function docker-net() {
if [ "$#" -gt 2 ]; then
  pid=`docker-pid $1`
  mkdir -p /var/run/netns/
  ln -s /proc/${pid}/ns/net /var/run/netns/${pid}
  ip link add ${pid}_A type veth peer name ${pid}_B
  brctl addif br0 ${pid}_A
  ip link set ${pid}_A up
  ip link set ${pid}_B netns $pid
  ip netns exec $pid ip link set dev ${pid}_B name eth0
  ip netns exec $pid ip link set eth0 up
  ip netns exec $pid ip addr add $2 dev eth0
  ip netns exec $pid ip route add default via $3
else
  echo "docker-net ContainerID ContainerIP/MASK GATEWAY"
fi
}
```
